# SonarCloud configuration for SimSoviet 2000
# https://sonarcloud.io/project/overview?id=arcade-cabinet_sim-soviet

sonar.projectKey=arcade-cabinet_sim-soviet
sonar.organization=arcade-cabinet

# Source directories (app UI + game logic)
sonar.sources=src,app
sonar.tests=src/__tests__,e2e

# Only analyze TypeScript and JavaScript
sonar.language=ts

# Coverage from Vitest (v8 provider, LCOV format)
sonar.javascript.lcov.reportPaths=coverage/lcov.info

# ── Exclusions ──────────────────────────────────────────────────────────────

# Don't analyze test files as production code
sonar.exclusions=\
  src/__tests__/**,\
  e2e/**,\
  scripts/**,\
  **/*.test.ts,\
  **/*.test.tsx,\
  **/*.spec.ts,\
  **/*.d.ts,\
  dist/**,\
  coverage/**,\
  node_modules/**,\
  android/**,\
  .capacitor/**

# Don't flag duplication in tests or generated files
sonar.cpd.exclusions=\
  src/__tests__/**,\
  e2e/**,\
  src/data/buildingDefs.generated.json,\
  app/public/sw.js

# Test file patterns for coverage mapping
sonar.test.inclusions=\
  src/__tests__/**/*.test.ts,\
  src/__tests__/**/*.test.tsx,\
  e2e/**/*.spec.ts

# ── Issue management ────────────────────────────────────────────────────────

# Cognitive complexity: game systems are inherently complex state machines.
# Biome already enforces this with inline suppression comments where needed.
# Raise the threshold to avoid noise on tick loops and simulation systems.
sonar.javascript.cognitive-complexity.threshold=25
